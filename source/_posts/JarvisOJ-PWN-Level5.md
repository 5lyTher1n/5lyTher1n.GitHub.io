---
title: JarvisOJ_PWN_Level5
date: 2019-11-21 18:42:16
tags:
- Sec
- CTF
- PWN
- JarvisOJ
categories:
- Sec
- CTF
- PWN
---
# 前言 #
和level3_x64的文件是一样的，不同的地方在于，这里假设不让使用system函数和execve函数。

题目提示了可以用mmap或mprotect。

嗯，两个听都没听过的东西。。。

直接找题解吧つ﹏⊂


**前排提醒，文章记录很乱，大概率对别人没什么帮助。愿意看就点下面吧，做好右上角的准备**
<!-- more -->

# 题解 #

大致看了下，这两个函数，觉得有点看的不是太懂。。。

（**以下感觉不太对，算是自己理解的，准确的还是应该查下网上的内容**）*
mmap好像是使一段文件和内存建立连接，修改其中一个，另一个也会发生改变。*

*mprotect的话，好像是修改一段区间的权限。权限表示方式好像和chmod一样*

看的题解好像都是使用的mprotect。
## 第一步 ##
和之前一样，先输出write在内存中的地址。然后计算出offset.这样可以使用libc.so里的内容。

## 第二步 ##
使用mprotect修改bss段的一段区间的权限，改为7.好像命令是以chmod的形式给出。

## 第二步 ##

找到bss地址，把shellcode写入到bss地址里。然后ret到shellcode上，开始执行代码

# 总结 #
这应该是写的最少的一次报告。

状态没那么好，真让我总结技术点，实在不知道总结些什么好。。。扯点场外：

题目是上午上课时写的，中午和下午一直在调程序，主要之前写的程序都属于自娱自乐的玩具，真的要发挥些作用时就发现，问题不少。比如，我连使用异常处理的习惯都没有，导致程序报错时直接崩溃了。再或者程序运行着忽然就卡住不动了，可能和资源释放有关系、也可能和timeout有关，结果就一直在看着程序跑。。。事后感觉，好蠢哦0.0 。。。应该放着程序跑，然后设定异常时警告之类的方法，然后专心做别的事，让人来监视着程序跑几个小时，emmm，好蠢0.0


有可能这篇报告会修改，但今天就先这样发着吧~*美其名曰，真实的记录学习过程つ﹏⊂*~


**人一我百，人十我万，永不放弃，加油！**